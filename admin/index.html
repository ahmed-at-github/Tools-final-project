<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Interface</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart Script -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* Custom styles for the Inter font */
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Custom scrollbar for the content area */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: #e0f2fe;
            /* Lightest blue from your palette */
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #90cdf4;
            /* A slightly darker blue for the thumb */
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #63b3ed;
            /* Even darker on hover */
        }

        /* Custom utility class for hiding sections */
        .page-content.hidden {
            display: none;
        }
    </style>
</head>

<body class="bg-[#F0F8FF] min-h-screen flex flex-col">
    <!-- Main container for the dashboard -->
    <div class="flex flex-1 overflow-hidden">
        <!-- Sidebar -->
        <aside class="w-[280px] bg-[#E0F2FE] p-4 flex flex-col shadow-lg rounded-r-lg">
            <div class="text-2xl font-bold text-gray-800 mb-8 rounded-lg p-2 bg-[#D1EEFF]">
                <div class="flex items-center gap-1 mb-1">
                    <img src="https://avatar.iran.liara.run/public/95" class="size-[60px] block" />
                    <p class="text-lg font-light text-gray-800 block">${adminId} </p>
                </div>
                <p>Admin Interface</p>
            </div>
            <nav class="flex-1 space-y-2">
                <a href="#" id="admin-dashboard-link"
                    class="flex items-center sidebar-link p-3 text-gray-700 hover:bg-[#BEE3F8] rounded-lg transition-colors duration-200 ease-in-out font-medium active-link bg-[#BEE3F8]">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z">
                        </path>
                    </svg> Admin Dashboard</a>
                <a href="#" id="manage-complaints-link"
                    class="flex items-center sidebar-link p-3 text-gray-700 hover:bg-[#BEE3F8] rounded-lg transition-colors duration-200 ease-in-out font-medium">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M10 12h.01">
                        </path>
                    </svg> Manage Complaints</a>
                <a href="#" id="manage-roles-link"
                    class="flex items-center sidebar-link p-3 text-gray-700 hover:bg-[#BEE3F8] rounded-lg transition-colors duration-200 ease-in-out font-medium">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h10a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a1 1 0 100-2 1 1 0 000 2zm0 4a1 1 0 100-2 1 1 0 000 2z">
                        </path>
                    </svg> Manage Roles</a>
            </nav>
        </aside>

        <!-- Main content area -->
        <main class="flex-1 flex flex-col p-6 bg-white rounded-l-lg shadow-xl m-4">
            <!-- Header -->
            <header class="flex justify-between items-center pb-4 border-b border-gray-200 mb-6">
                <h1 id="pageTitle" class="text-3xl font-extrabold text-gray-900">Admin Dashboard</h1>
                <div class="relative">
                    <button id="menuButton"
                        class="p-2 rounded-full bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ease-in-out">
                        <svg class="w-8 h-8 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
                    </button>
                    <!-- Dropdown Menu -->
                    <div id="dropdownMenu"
                        class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-2 z-10 hidden">
                        <a href="#admin-dashboard-content"
                            class="block px-4 py-2 text-gray-800 hover:bg-gray-100 rounded-lg">Dashboard</a>
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100 rounded-lg">Settings</a>
                        <a href="#" class="block px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg">Logout</a>
                    </div>
                </div>
            </header>

            <!-- Admin Dashboard Content -->
            <section id="admin-dashboard-content"
                class="page-content flex-1 bg-[#F5FBFF] p-6 rounded-lg border border-gray-200 overflow-y-auto custom-scrollbar">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">Complaints Overview</h2>
                <div class="space-y-4">

                    <div class="bg-white p-6 rounded-lg shadow-lg">
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                            <div
                                class="bg-blue-500 text-white p-6 rounded-lg shadow-md hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                                <h3 class="text-3xl font-bold mb-2">1,245</h3>
                                <p class="text-lg">Total Complaints</p>
                            </div>
                            <div
                                class="bg-yellow-500 text-white p-6 rounded-lg shadow-md hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                                <h3 class="text-3xl font-bold mb-2">212</h3>
                                <p class="text-lg">Open</p>
                            </div>
                            <div
                                class="bg-green-500 text-white p-6 rounded-lg shadow-md hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                                <h3 class="text-3xl font-bold mb-2">15</h3>
                                <p class="text-lg">Received Today</p>
                            </div>
                            <div
                                class="bg-red-500 text-white p-6 rounded-lg shadow-md hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                                <h3 class="text-3xl font-bold mb-2">62%</h3>
                                <p class="text-lg">Resolved Rate</p>
                            </div>
                        </div>

                        <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                            <h3 class="text-xl font-semibold text-gray-800 mb-4">Complaints per Department</h3>
                            <div class="h-64 flex items-center justify-center text-gray-400">
                                <div>
                                    <canvas id="departmentChart" class="w-full h-64"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </section>

            <!-- Manage Complaints Content -->
            <section id="manage-complaints-content"
                class="page-content flex-1 bg-[#F5FBFF] p-6 rounded-lg border border-gray-200 overflow-y-auto custom-scrollbar hidden">
                <div class="flex justify-between items-center mb-4">
                    <!-- Search Box -->
                    <div class="relative w-[300px] min-w-[300px] mb-4">
                        <input type="text" placeholder="Search by dept, date, status"
                            class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:border-blue-500 transition">
                        <svg class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"
                            fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                    <table id="dataTable" class="min-w-full table-auto">
                        <thead>
                            <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
                            </tr>
                        </thead>
                        <tbody class="text-gray-600 text-sm font-medium">
                        </tbody>
                    </table>
                </div>

            </section>

            <!-- Manage Roles Content -->
            <section id="manage-roles-content"
                class="page-content flex-1 bg-[#F5FBFF] p-6 rounded-lg border border-gray-200 overflow-y-auto custom-scrollbar hidden">
                <div class="flex justify-between items-center mb-4">
                    <!-- Search Box -->
                    <div class="relative w-[300px] min-w-[300px] mb-4">

                        <input type="text" placeholder="Search by role, status"
                            class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:border-blue-500 transition">
                        <svg class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"
                            fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>


                    </div>
                    <!-- Add user -->
                    <div class="flex justify-end mb-4">
                        <button
                            class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center transition duration-150 ease-in-out">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v2h-2a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z">
                                </path>
                            </svg>
                            Add New User
                        </button>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                    <table class="min-w-full table-auto">
                        <thead>
                            <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
                                <th class="py-3 px-6 text-left font-semibold">USER ID</th>
                                <th class="py-3 px-6 text-left font-semibold">NAME</th>
                                <th class="py-3 px-6 text-left font-semibold">EMAIL</th>
                                <th class="py-3 px-6 text-left font-semibold">ROLE</th>
                                <th class="py-3 px-6 text-left font-semibold">STATUS</th>
                                <th class="py-3 px-6 text-left font-semibold">ACTIONS</th>
                            </tr>
                        </thead>
                        <tbody class="text-gray-600 text-sm font-medium">
                            <tr class="border-b border-gray-200 hover:bg-gray-100 transition duration-150 ease-in-out">
                                <td class="py-3 px-6 text-left whitespace-nowrap">#U101</td>
                                <td class="py-3 px-6 text-left">John Doe</td>
                                <td class="py-3 px-6 text-left">john.doe@example.com</td>
                                <td class="py-3 px-6 text-left">
                                    <select
                                        class="form-select block w-full bg-gray-100 border border-gray-300 rounded-lg py-1 px-2 text-sm text-gray-700 focus:outline-none focus:border-blue-500">
                                        <option value="student">Student</option>
                                        <option value="teacher" selected>Teacher</option>
                                        <option value="admin">Chairman</option>
                                    </select>
                                </td>
                                <td class="py-3 px-6 text-left">
                                    <span
                                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-green-200 text-green-800">Active</span>
                                </td>
                                <td class="py-3 px-6 text-left">
                                    <div class="flex item-center space-x-2">
                                        <a href="#"
                                            class="w-4 transform hover:text-purple-500 hover:scale-110 transition duration-150 ease-in-out">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                                stroke="currentColor" class="w-5 h-5">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                    d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z">
                                                </path>
                                            </svg>
                                        </a>
                                        <a href="#"
                                            class="w-4 transform hover:text-blue-500 hover:scale-110 transition duration-150 ease-in-out">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                                stroke="currentColor" class="w-5 h-5">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                    d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z">
                                                </path>
                                            </svg>
                                        </a>
                                        <a href="#"
                                            class="w-4 transform hover:text-red-500 hover:scale-110 transition duration-150 ease-in-out">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                                stroke="currentColor" class="w-5 h-5">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                                                </path>
                                            </svg>
                                        </a>
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Get the menu button and dropdown menu elements
        const menuButton = document.getElementById('menuButton');
        const dropdownMenu = document.getElementById('dropdownMenu');
        const pageTitle = document.getElementById('pageTitle');
        const sidebarLinks = document.querySelectorAll('.sidebar-link');
        const contentSections = document.querySelectorAll('.page-content');

        // Initial setup to show the correct content
        function showContent(id) {
            // Hide all content sections
            contentSections.forEach(section => {
                section.classList.add('hidden');
            });
            // Show the selected content section
            const selectedSection = document.getElementById(id);
            if (selectedSection) {
                selectedSection.classList.remove('hidden');
            }
        }

        // Handle sidebar link clicks
        sidebarLinks.forEach(link => {
            link.addEventListener('click', (event) => {
                event.preventDefault();

                // Remove active class from all links
                sidebarLinks.forEach(item => {
                    item.classList.remove('active-link', 'bg-[#BEE3F8]');
                });

                // Add active class to the clicked link
                link.classList.add('active-link', 'bg-[#BEE3F8]');

                // Get the ID of the content to display
                const contentId = link.id.replace('-link', '-content');

                // Update the main header title
                pageTitle.textContent = link.textContent;

                // Show the corresponding content section
                showContent(contentId);
            });
        });

        // Toggle the dropdown menu visibility
        menuButton.addEventListener('click', () => {
            dropdownMenu.classList.toggle('hidden');
        });

        // Close the dropdown menu if clicked outside
        window.addEventListener('click', (event) => {
            if (!menuButton.contains(event.target) && !dropdownMenu.contains(event.target)) {
                dropdownMenu.classList.add('hidden');
            }
        });
    </script>

    <!-- Chart Script -->
    <script>
        const ctx = document.getElementById('departmentChart').getContext('2d');
        const total = 212;
        const myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['CSE', 'EEE', 'EB', 'QSIS', 'ELL'],
                datasets: [{
                    label: 'Number of Open Complaints',
                    data: [Math.floor(total * .5), Math.floor(total * .25), Math.floor(total * .10), Math.floor(total * .05), Math.floor(total * .10)],
                    backgroundColor: [
                        'rgba(59, 130, 246, 0.6)',  // blue-500
                        'rgba(251, 191, 36, 0.6)',  // yellow-500
                        'rgba(34, 197, 94, 0.6)',   // green-500
                        'rgba(239, 68, 68, 0.6)',   // red-500
                        'rgba(99, 102, 241, 0.6)'   // indigo-500
                    ],
                    borderColor: [
                        'rgba(59, 130, 246, 1)',
                        'rgba(251, 191, 36, 1)',
                        'rgba(34, 197, 94, 1)',
                        'rgba(239, 68, 68, 1)',
                        'rgba(99, 102, 241, 1)'
                    ],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>

    <!-- Table Script -->
    <script>
        const API_URL = 'http://localhost:1857/'; // Using a public API for demonstration

        async function fetchAndDisplayData() {
            try {
                const response = await fetch(API_URL);
                const data = await response.json();

                // Get the table and its body element
                const table = document.getElementById('dataTable');
                const tableBody = table.querySelector('tbody');
                const tableHead = table.querySelector('thead tr');

                // Clear existing table content (if any)
                tableBody.innerHTML = '';
                tableHead.innerHTML = '';

                if (data.length > 0) {
                    // 1. Create table headers
                    const headers = Object.keys(data[0]);
                    headers.forEach(headerText => {
                        if (headerText === "details") {
                            return; // 'return' inside forEach acts like 'continue'
                        }

                        else {
                            const th = document.createElement('th');
                            th.className = 'py-3 px-6 text-left';
                            th.textContent = headerText;
                            tableHead.appendChild(th);
                        }
                    });

                    // 2. Create table rows and cells
                    data.forEach(item => {
                        const tr = document.createElement('tr');

                        headers.forEach(header => {

                            if (header === "details") {
                                return; // 'return' inside forEach acts like 'continue'
                            }
                            else {

                            const td = document.createElement('td');
                            td.className = 'py-3 px-6 text-left whitespace-nowrap';
                            td.textContent = item[header];
                            tr.appendChild(td); }
                        });

                        tableBody.appendChild(tr);
                    });
                }
            } catch (error) {
                console.error('Error fetching or parsing data:', error);
                // You could display an error message to the user here
                const tableBody = document.getElementById('dataTable').querySelector('tbody');
                tableBody.innerHTML = '<tr><td colspan="3">Failed to load data. Please try again.</td></tr>';
            }
        }

        // Call the function when the page loads
        document.addEventListener('DOMContentLoaded', fetchAndDisplayData);

    </script>
</body>

</html>